<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Continuous Delivery chez lesfurets.com</title>
    <meta name="description" content="Continuous delivery chez les furets.com">
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <link rel="stylesheet" href="bower_components/reveal.js/css/reveal.css">
    <link rel="stylesheet" href="bower_components/reveal.js/lib/css/zenburn.css">
    <link rel="stylesheet" href="bower_components/code-prettify/styles/desert.css">
    <link rel="stylesheet" href="css/theme.css" id="theme">
    <script>
      if (window.location.search.match(/print-pdf/gi)) {
        var link = document.createElement('link');
        link.rel = 'stylesheet';
        link.type = 'text/css';
        link.href = 'css/print/pdf.css';
        document.getElementsByTagName('head')[0].appendChild(link);
      }
    </script>
  </head>

  <body class="noFullScreen">
    <div id="footer" class="footer show">
      <img class="logo-lesfurets" src="img/logo_lesfurets_blanc.png">
      <div class="card">
        <p><a href="https://twitter.com/dubreuia"><img class="logo" width="20px" src="img/logo_twitter.svg"></a><a href="https://github.com/mgandin"><img class="logo" width="20px" src="img/logo_github.svg"></a>@m_gandin</p>
      </div>
    </div>
    <div id="reveal" class="reveal">
      <div class="slides">

        <section>
          <img class="logo herve-francois" width="33%" src="img/lf_com_herve_francois.png">
          <h1>Continuous Delivery chez lesfurets.com</h1>
          <p><strong>Mathieu Gandin</strong></p>
        </section>

          <section>
            <img width="50%" src="img/logo_lesfurets.png">
            <ul>
              <li>1 site, 5 produits de comparaison d'assurance : Auto, santé, Maison, Moto, Emprunteur</li>
              <li class="emptyline">1 codebase, 450k lignes de code, 60k tests unitaires, 150 tests selenium</li>
              <li>22 Developpeurs, 2 DevOps, 4 Architectes</li>
              <li class="emptyline">19 serveurs de production, Frontend, Backend, Databases, BI</li>
              <li>1 release par jour</li>
              <li class="emptyline">du code qui peut avoir 9 ans d'âge
                <br/>
              </li>
              <li>3M quotes/années, 40% market share, 4M de clients</li>
            </ul>
          </section>

          <section>
            <h2>Contexte</h2>
          </section>

          <section data-transition="slide-in fade-out">
            <img width="66%" src="img/lf_car_journey.png">
          </section>

          <section data-transition="fade-in slide-out">
            <img width="66%" src="img/lf_com_car_price_sheet.png">
          </section>

          <section>
            <h2>Le delivery chez lesfurets.com</h2>
            <ul class="color-gray400 nodisc">
              <li class="color-gray400">
                <span style="color:#f07d00;font-weight: bold">2012</span> :
                <span class="white">Spring Scrum mensuel</span><br>
                <span class="color-indigo300">12 releases</span>
                <span class="color-gray">(build 15 minutes et selenium 1 heure)</span>
              </li>
              <br>
              <li class="color-gray400">
                <span style="color:#f07d00;font-weight: bold">2013</span> :
                <span class="white">Sprint scrum hebdo</span><br>
                <span class="color-indigo300">45 releases</span>
                <span class="color-gray">(build 3 minutes, release 1 jour)</span>
              </li>
              <br>
              <li class="color-gray400">
                <span style="color:#f07d00;font-weight: bold">2014 - 2016</span> :
                <span class="white">Flux Kanban livraison quotidienne</span><br>
                <span class="color-indigo300">208, 217, 220+ releases</span>
                (release 2 heures)
              </li>
              <br>
              <li class="white">
                <span style="color:#f07d00;font-weight: bold">2017+</span> :
                Release partielle, release par feature
              </li>
            </ul>
            <aside class="notes">
              MGA
              <ul class="color-gray400 nodisc">
                <li>Gestion de code source flexible</li>
                <li>Integration continue</li>
                <li>Build rapide et automatique avec des tests fiables</li>
                <li>Gestion des artéfacts</li>
                <li>Déploiement automatique</li>
              </ul>
            </aside>
          </section>

          <section>
            <h2>Sur quoi repose notre delivery ?</h2>
          </section>

          <section>
            <h2>Monitoring</h2>
            <img width="66%" src="img/monitoring-datadog-log.png"/>
          </section>

          <section>
            <h2>Monitoring</h2>
            <img width="66%" src="img/monitoring-graphite-tessera.png"/>
          </section>

          <section>
            <h2>Mise en production sans interruption</h2>
            <img width="66%" src="img/deployment-blue-green.png" />
          </section>

          <section>
            <h2>Continuous delivery</h2>
            <img width="66%" src="img/jenkins_pipeline_deploy.jpg" />
          </section>

        <section data-transition="fade-in" data-transition-speed="slow">
          <h2>Feature branching</h2>
          <img class="nostyle" src="img/feature_branch_1.svg"/>
          <p class="flushleft svg-header small"><strong>feature branching</strong> : on part d'un master</p>
        </section>

        <section data-transition="fade-in" data-transition-speed="slow">
          <h2>Feature branching</h2>
          <img class="nostyle" src="img/feature_branch_2.svg"/>
          <p class="flushleft svg-header small"><strong>création d'une branche de développement <code>features/f1</code></strong></p>
        </section>

        <section data-transition="fade-in" data-transition-speed="slow">
          <h2>Feature branching</h2>
          <img class="nostyle" src="img/feature_branch_3.svg"/>
          <p class="flushleft svg-header small"><strong>création d'une branche de développement <code>features/f2</code></strong></p>
        </section>

        <section data-transition="fade-in" data-transition-speed="slow">
          <h2>Continuous Merge</h2>
          <img class="nostyle" src="img/continuous_merge_1.svg"/>
          <p class="flushleft svg-header small"><strong> merge de <code>features/f1</code> et <code>features/f2</code> avec master</strong></p>
        </section>

        <section data-transition="fade-in" data-transition-speed="slow">
          <h2>Continuous Merge</h2>
          <img class="nostyle" src="img/continuous_merge_2.svg"/>
          <p class="flushleft svg-header small"><strong>nouveau commit sur <code>features/f1</code></strong></p>
        </section>

        <section data-transition="fade-in" data-transition-speed="slow">
          <h2>Continuous Merge</h2>
          <img class="nostyle" src="img/continuous_merge_3.svg"/>
          <p class="flushleft svg-header small"><strong>fusion automatique</strong></p>
        </section>

        <section>
          <h2>Continuous Merge</h2>
          <img class="nostyle" src="img/octopus-05.gif"/>
          <p class="flushleft svg-header small"><strong>Git Octopus</strong> : <a href="https://github.com/lesfurets/git-octopus">https://github.com/lesfurets/git-octopus</a></p>
        </section>

        <section>
          <h2>Continuous Delivery</h2>
          <img width="90%" class="nostyle" src="img/git_repo_setup_1.png"/>
          <p class="flushleft svg-header small"><strong>Les features sont livrées dès qu'elles sont prêtes</strong></p>
        </section>

        <section>
          <h2>Comment on suit les changements de mapping ?</h2>
        </section>

        <section>
          <h2>Demande de modification de mapping</h2>
          <ul>
            <li>Chaque intégration d'assureur repose sur un cahier des charges qui référence un mapping à jour</li>
            <li>Chaque demande de mapping nécessite de mettre à jour ce cahier des charges</li>
            <li>Les Product Owners vérifient que la démande est claire et que nous avons tous les éléments pour démarrer les développements</li>
            <li>En cours de développement, si la demande est modifiée, le développeur met à jour le cahier des charges</li>
          </ul>
        </section>

        <section>
          <h2>Exemple des éléments récupérés</h2>
          <ul>
            <li>URLs et accès aux web services, exemple de requêtes</li>
            <li>Contenu de nouvelles formules, CG, IPID, logos</li>
            <li>Exclusion à appliquer</li>
            <li>Méthodes de récupération des tarifs</li>
            <li>Dates de début et de fin et cibles d'une promotion</li>
          </ul>
        </section>

        <section>
          <h2>Validation des modifications de mapping</h2>
          <ul>
            <li>Sur la tarification : on doit avoir des tests représentatifs sur les différents codes retour possibles</li>
            <li>Sur la mise en relation : on doit avoir des tests sur tous les types de mers proposés. L'url de redirection vers le site de l'assureur doit être testée pour la souscription en ligne. </li>
            <li>Sur le nombre d'exclusions appliquées pour cet assureur</li>
            <li>On doit avoir un test de mapping complet pour la tarification sur au moins un profil</li>
            <li>On doit avoir un test de mapping complet pour la mer sur au moins un profil</li>
            <li>On doit tester pour la mer que email, téléphone, nom, et prénom sont envoyés à la mer.</li>
          </ul>
        </section>

        <section>
          <h2>Benchmarking</h2>
          <ul>
            <li>On rejoue sur le code du nouveau mapping un ensemble de profils passés sur le site</li>
            <li>L'exécution du Benchmark permet d'évaluer sur le nouveau mapping le nombre de Succes, Refus, Exclusion, Error, Error_Partner, Timeout</li>
            <li>Chaque modification de mapping ou de filtres d'exclusion nécessite l'exécution d'un benchmark/home/mgandin/Téléchargements/question.gif</li>
          </ul>
        </section>

        <section>
          <h2>Questions ?</h2>
          <img src="img/question.gif"/>
        </section>
      </div>
    </div>
    <script src="bower_components/reveal.js/lib/js/head.min.js"></script>
    <script src="bower_components/reveal.js/js/reveal.js"></script>
    <script>
      // Full list of configuration options available here:
      // https://github.com/hakimel/reveal.js#configuration
      Reveal.initialize({
        controls: false,
        progress: true,
        history: true,
        center: true,
        embedded: true,
        mouseWheel: true,
        slideNumber: true,
        slideNumber: 'c/t',
        viewDistance: 5,

        width: 1280,
        height: 900,
        margin: 0,

        transition: Reveal.getQueryHash().transition || 'linear', // default/cube/page/concave/zoom/linear/fade/none

        // Optional libraries used to extend on reveal.js
        dependencies: [
          { src: 'bower_components/reveal.js/lib/js/classList.js', condition: function () { return !document.body.classList; } },
          { src: 'bower_components/reveal.js/plugin/markdown/marked.js', condition: function () { return !!document.querySelector('[data-markdown]'); } },
          { src: 'bower_components/reveal.js/plugin/markdown/markdown.js', condition: function () { return !!document.querySelector('[data-markdown]'); } },
          //{ src: 'bower_components/reveal.js/plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
          { src: 'bower_components/reveal.js/plugin/zoom-js/zoom.js', async: true, condition: function () { return !!document.body.classList; } },
          { src: 'bower_components/reveal.js/plugin/notes/notes.js', async: true, condition: function () { return !!document.body.classList; } }
        ]
      });
    </script>
    <script src="bower_components/jquery/dist/jquery.slim.min.js"></script>
    <script src="js/script.js"></script>
    <script src="bower_components/code-prettify/loader/run_prettify.js?skin=desert&amp;callback=prettyCallback"></script>
  </body>
</html>
<!-- vim: set tabstop=2 softtabstop=2 shiftwidth=2 expandtab smarttab: -->
